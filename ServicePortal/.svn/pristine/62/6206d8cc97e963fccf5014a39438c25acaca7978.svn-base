!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("@angular/animations"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/animations","@angular/common"],factory):factory((global.ng=global.ng||{},global.ng.ngxSmartModal={}),global.ng.core,global.ng.animations,global.ng.common)}(this,function(exports,core,animations,common){"use strict";/**
 * @license ngx-smart-modal
 * MIT license
 */
var NgxSmartModalService=function(){function NgxSmartModalService(){this.modalStack=[]}return NgxSmartModalService.prototype.addModal=function(modalInstance,force){if(force){var i=this.modalStack.findIndex(function(o){return o.id===modalInstance.id});i>-1?this.modalStack[i].modal=modalInstance.modal:this.modalStack.push(modalInstance)}else this.modalStack.push(modalInstance)},NgxSmartModalService.prototype.getModal=function(id){return this.modalStack.filter(function(o){return o.id===id})[0].modal},NgxSmartModalService.prototype.getModalStack=function(){return this.modalStack},NgxSmartModalService.prototype.getOpenedModals=function(){var modals=[];return this.modalStack.forEach(function(o){o.modal.visible&&modals.push(o)}),modals},NgxSmartModalService.prototype.getHigherIndex=function(){var index=[];return this.getOpenedModals().forEach(function(o){index.push(o.modal.layerPosition)}),Math.max.apply(Math,index)+1},NgxSmartModalService.prototype.getModalStackCount=function(){return this.modalStack.length},NgxSmartModalService.prototype.removeModal=function(id){var i=this.modalStack.findIndex(function(o){return o.id===id});i>-1&&this.modalStack.splice(i,1)},NgxSmartModalService.prototype.setModalData=function(data,id,force){return!!this.modalStack.find(function(o){return o.id===id})&&(this.getModal(id).setData(data,force),!0)},NgxSmartModalService.prototype.getModalData=function(id){return this.getModal(id).getData()},NgxSmartModalService.prototype.resetModalData=function(id){if(this.modalStack.find(function(o){return o.id===id})){var removed=this.getModal(id).getData();return this.getModal(id).removeData(),removed}return!1},NgxSmartModalService.prototype.closeLatestModal=function(){var me=this;clearTimeout(this.debouncer),this.debouncer=setTimeout(function(){var tmp;return me.getOpenedModals().forEach(function(m){m.modal.layerPosition>(tmp?tmp.modal.layerPosition:0)&&(tmp=m)}),!!tmp&&tmp.modal.close()},100)},NgxSmartModalService.decorators=[{type:core.Injectable}],NgxSmartModalService.ctorParameters=function(){return[]},NgxSmartModalService}(),NgxSmartModalComponent=function(){function NgxSmartModalComponent(ngxSmartModalService,changeDetectorRef){this.ngxSmartModalService=ngxSmartModalService,this.changeDetectorRef=changeDetectorRef,this.closable=!0,this.escapeAble=!0,this.customClass="",this.visible=!1,this.backdrop=!0,this.force=!0,this.visibleChange=new core.EventEmitter,this.onClose=new core.EventEmitter,this.onCloseFinished=new core.EventEmitter,this.onDismiss=new core.EventEmitter,this.onDismissFinished=new core.EventEmitter,this.onOpen=new core.EventEmitter,this.onEscape=new core.EventEmitter,this.onDataAdded=new core.EventEmitter,this.onDataRemoved=new core.EventEmitter,this.layerPosition=1041,this.overlayVisible=!1,this.data=null}return NgxSmartModalComponent.prototype.ngOnInit=function(){this.layerPosition+=this.ngxSmartModalService.getModalStackCount(),this.ngxSmartModalService.addModal({id:this.identifier,modal:this},this.force)},NgxSmartModalComponent.prototype.ngOnDestroy=function(){this.ngxSmartModalService.removeModal(this.identifier)},NgxSmartModalComponent.prototype.open=function(top){top&&(this.layerPosition=this.ngxSmartModalService.getHigherIndex()),document.body.classList.contains("dialog-open")||document.body.classList.add("dialog-open"),this.overlayVisible=!0,this.visible=!0,this.onOpen.emit(this)},NgxSmartModalComponent.prototype.close=function(){var me=this;this.visible=!1,this.visibleChange.emit(this.visible),this.onClose.emit(this),document.body.classList.contains("dialog-open")&&document.body.classList.remove("dialog-open"),setTimeout(function(){me.overlayVisible=!1,me.changeDetectorRef.markForCheck(),me.onCloseFinished.emit(me)},150)},NgxSmartModalComponent.prototype.dismiss=function(e){var me=this;e.target.classList.contains("overlay")&&(this.visible=!1,this.visibleChange.emit(this.visible),this.onDismiss.emit(this),document.body.classList.contains("dialog-open")&&document.body.classList.remove("dialog-open"),setTimeout(function(){me.overlayVisible=!1,me.changeDetectorRef.markForCheck(),me.onDismissFinished.emit(me)},150))},NgxSmartModalComponent.prototype.addCustomClass=function(className){this.customClass.length?this.customClass+=" "+className:this.customClass=className},NgxSmartModalComponent.prototype.removeCustomClass=function(className){this.customClass=className?this.customClass.replace(className,"").trim():""},NgxSmartModalComponent.prototype.isVisible=function(){return this.visible},NgxSmartModalComponent.prototype.hasData=function(){return!!this.data},NgxSmartModalComponent.prototype.setData=function(data,force){var _this=this;(!this.data||this.data&&force)&&setTimeout(function(){_this.data=data,_this.onDataAdded.emit(_this.data)},0)},NgxSmartModalComponent.prototype.getData=function(){return this.data},NgxSmartModalComponent.prototype.removeData=function(){var _this=this;setTimeout(function(){_this.data=null,_this.onDataRemoved.emit(!0)},0)},NgxSmartModalComponent.prototype.escapeKeyboardEvent=function(event){this.escapeAble&&27===event.keyCode&&(this.onEscape.emit(this),this.ngxSmartModalService.closeLatestModal())},NgxSmartModalComponent.decorators=[{type:core.Component,args:[{animations:[animations.trigger("dialog",[animations.transition("void => *",[animations.style({transform:"scale3d(.3, .3, .3)"}),animations.animate(100)]),animations.transition("* => void",[animations.animate(100,animations.style({transform:"scale3d(.0, .0, .0)"}))])])],selector:"ngx-smart-modal",template:'\n    <style>\n      .overlay {\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow-y: auto;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 999;\n      }\n\n      .overlay.transparent {\n        background-color: transparent;\n      }\n\n      body.dialog-open {\n        overflow: hidden;\n      }\n\n      .dialog {\n        visibility: visible;\n        position: absolute;\n        border-radius: 2px;\n        right: 0;\n        left: 0;\n        top: 20px;\n        margin-bottom: 20px;\n        margin-right: auto;\n        margin-left: auto;\n        min-height: 200px;\n        width: 90%;\n        max-width: 520px;\n        background-color: #fff;\n        padding: 12px;\n        box-shadow: 0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 13px 19px 2px rgba(0, 0, 0, 0.14), 0 5px 24px 4px rgba(0, 0, 0, 0.12);\n      }\n\n      @media (min-width: 768px) {\n        .dialog {\n          top: 40px;\n          margin-bottom: 40px;\n        }\n      }\n\n      .dialog__close-btn {\n        border: 0;\n        background: none;\n        color: #2d2d2d;\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        font-size: 1.2em;\n      }\n\n      .dialog__close-btn:hover {\n        cursor: pointer;\n      }\n    </style>\n    <div *ngIf="overlayVisible" class="overlay" [style.z-index]="layerPosition-1"\n         [ngClass]="{\'transparent\':!backdrop}"\n         (click)="dismiss($event)">\n      <div [@dialog] *ngIf="visible" [style.z-index]="layerPosition" class="dialog" [ngClass]="customClass">\n        <ng-content></ng-content>\n        <button *ngIf="closable" (click)="close()" aria-label="Close" class="dialog__close-btn">\n          <img\n            src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCI+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTUwNS45NDMsNi4wNThjLTguMDc3LTguMDc3LTIxLjE3Mi04LjA3Ny0yOS4yNDksMEw2LjA1OCw0NzYuNjkzYy04LjA3Nyw4LjA3Ny04LjA3NywyMS4xNzIsMCwyOS4yNDkgICAgQzEwLjA5Niw1MDkuOTgyLDE1LjM5LDUxMiwyMC42ODMsNTEyYzUuMjkzLDAsMTAuNTg2LTIuMDE5LDE0LjYyNS02LjA1OUw1MDUuOTQzLDM1LjMwNiAgICBDNTE0LjAxOSwyNy4yMyw1MTQuMDE5LDE0LjEzNSw1MDUuOTQzLDYuMDU4eiIgZmlsbD0iIzAwMDAwMCIvPgoJPC9nPgo8L2c+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTUwNS45NDIsNDc2LjY5NEwzNS4zMDYsNi4wNTljLTguMDc2LTguMDc3LTIxLjE3Mi04LjA3Ny0yOS4yNDgsMGMtOC4wNzcsOC4wNzYtOC4wNzcsMjEuMTcxLDAsMjkuMjQ4bDQ3MC42MzYsNDcwLjYzNiAgICBjNC4wMzgsNC4wMzksOS4zMzIsNi4wNTgsMTQuNjI1LDYuMDU4YzUuMjkzLDAsMTAuNTg3LTIuMDE5LDE0LjYyNC02LjA1N0M1MTQuMDE4LDQ5Ny44NjYsNTE0LjAxOCw0ODQuNzcxLDUwNS45NDIsNDc2LjY5NHoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K" />\n        </button>\n      </div>\n    </div>\n  '}]}],NgxSmartModalComponent.ctorParameters=function(){return[{type:NgxSmartModalService},{type:core.ChangeDetectorRef}]},NgxSmartModalComponent.propDecorators={closable:[{type:core.Input}],escapeAble:[{type:core.Input}],identifier:[{type:core.Input}],customClass:[{type:core.Input}],visible:[{type:core.Input}],backdrop:[{type:core.Input}],force:[{type:core.Input}],visibleChange:[{type:core.Output}],onClose:[{type:core.Output}],onCloseFinished:[{type:core.Output}],onDismiss:[{type:core.Output}],onDismissFinished:[{type:core.Output}],onOpen:[{type:core.Output}],onEscape:[{type:core.Output}],onDataAdded:[{type:core.Output}],onDataRemoved:[{type:core.Output}],escapeKeyboardEvent:[{type:core.HostListener,args:["document:keydown",["$event"]]}]},NgxSmartModalComponent}(),NgxSmartModalModule=function(){function NgxSmartModalModule(){}return NgxSmartModalModule.forRoot=function(){return{ngModule:NgxSmartModalModule,providers:[NgxSmartModalService]}},NgxSmartModalModule.forChild=function(){return{ngModule:NgxSmartModalModule,providers:[NgxSmartModalService]}},NgxSmartModalModule.decorators=[{type:core.NgModule,args:[{declarations:[NgxSmartModalComponent],exports:[NgxSmartModalComponent],imports:[common.CommonModule]}]}],NgxSmartModalModule.ctorParameters=function(){return[]},NgxSmartModalModule}();exports.NgxSmartModalService=NgxSmartModalService,exports.NgxSmartModalComponent=NgxSmartModalComponent,exports.NgxSmartModalModule=NgxSmartModalModule,Object.defineProperty(exports,"__esModule",{value:!0})});